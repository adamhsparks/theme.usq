---
title: "theme.usq"
author: "Adam H Sparks"
date: "`r Sys.Date()`"
output:
  html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{theme.usq}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, eval = TRUE, message=FALSE, echo=FALSE}
library(theme.usq)
library(ggplot2)
knitr::opts_chunk$set(eval = TRUE, collapse = TRUE, comment = "#>", fig.width = 7, fig.height = 5, fig.align = "center")
```

# Introduction

The goal of _theme.usq_ is to provide
[University of Southern Queensland](https://usq.edu.au) (USQ) staff and students
a quick and easy way to apply USQ colours and typography to graphs created in R
using the base _graphics_ package or _ggplot2_ while providing clear graphs for
reports and presentations. All of the colours provided are defined in USQ's Visual Identity Colour Palette, but do not all appear in the same order to
maintain usability for the purposes of graphing.

This package has been tested on macOS, Ubuntu Linux and USQ computers using
Windows 7. For Linux users, if you have not installed the MS Core Fonts, you
will need to do that for this package to function properly and generate the
graphs with the proper typography. Windows and macOS users should be ready to go
with just the installation of this package.

# Examples

## Example 1: Scatterplots of discrete data

### Using `plot_usq()`

Plot car weights by miles per gallon.

```{r example1.1}
plot_usq(x = mtcars$wt, y = mtcars$mpg, xlab = "wt", ylab = "mpg")
```

### Using _ggplot2_ and `theme_usq()`

Plot car weights by miles per gallon.

```{r example1.2}
p1 <- ggplot(data = mtcars, aes(x = wt,  y = mpg)) +
  geom_point() +
  theme_usq()
 
p1
```

Plot car weights by miles per gallon and facet by `Transmission` (0 = automatic,
1 = manual) using the `usq_palette` in the `scale_colour_manual` discrete scale
function to use USQ colours for the graph.

```{r example1.2a}
p1 <- ggplot(mtcars) +
  geom_point(aes(
    x = wt,
    y = mpg,
    colour = factor(gear)
  )) +
  scale_colour_manual(values = usq_palette) +
  facet_wrap(~ am) +
  theme_usq()

p1
```

## Example 2: Heatmaps or other continuous data

### Using _ggplot2_ and `theme_usq()`

Using the _usq.theme's_ `theme_usq()` for _ggplot2_, plot values using the
`usq_fill_gradient` to use USQ colours for continuous values in the graph. Two
types of gradients are included, warm and cool for both `scale_fill_gradient()`
and `scale_colour_gradient()` as necessary.

### Warm gradients

```{r example2a}
p2a <- ggplot(faithfuld, aes(waiting, eruptions)) +
  geom_raster(aes(fill = density), interpolate = TRUE) +
  usq_fill_gradient_warm() +
  theme_usq()
  
p2a
```

### Cool gradients

```{r example2b}
p2b <- ggplot(faithfuld, aes(waiting, eruptions)) +
  geom_raster(aes(fill = density), interpolate = TRUE) +
  usq_fill_gradient_cool() +
  theme_usq()
  
p2b
```

## Example 3: Heatmaps using other colour palettes

### Using _ggplot2_ and `theme_usq()`

`theme_usq()` can be used with any colour palette that you wish to use, while
still applying the graph styling and typography to the graph.

Use the default _ggplot2_ colour scheme to fill the density plot while using
the `theme_usq()` to theme the graph.

```{r example3}
p3 <- ggplot(faithfuld, aes(waiting, eruptions)) +
  geom_raster(aes(fill = density), interpolate = TRUE) +
  theme_usq()
  
p3
```

## Example 4: Histograms

### Using `hist_usq()`

```{r example4.1}
hist_usq(diamonds$carat, xlab = "carat")
```

### Using _ggplot2_ and `theme_usq()`

```{r example4.2}
p4 <- ggplot(diamonds, aes(carat)) +
  geom_histogram(fill = usq_palette[1]) +
  theme_usq()

p4
```

## Example 5: Boxplots

### Using `boxplot_usq()`

Plot the highway miles per gallon (mpg) of 38 popular car models in the US by
class of car.

### Using `boxplot_usq()`

```{r example5.1}
boxplot_usq(mpg$hwy ~ mpg$class)
```

### Using _ggplot2_ and `theme_usq()`

```{r example5.2}
p5 <- ggplot(mpg, aes(class, hwy)) +
  geom_boxplot(fill = usq_palette[1],
               colour = usq_palette[1],
               alpha = 0.5) +
  theme_usq()
  
p5
```

Use the USQ colours to fill the box-plots while using `drv` (_e.g._, 4-wheel drive, front-wheel drive or rear-wheel drive) for the box-plot colour.

```{r example5.3}
p5.1 <- ggplot(mpg, aes(class, hwy)) +
  geom_boxplot(aes(fill = drv), colour = usq_palette[1]) +
  scale_fill_manual(values = usq_palette) +
  theme_usq()
  
p5.1
```

## Example 6: Timeseries

### Using _ggplot2_ and `theme_usq()` to plot timeseries lines

This example uses discrete colours for each variable of interest. While possible
to do with base R graphics, _ggplot2_ simplifies the process greatly, so it is
the only example provided and suggested for use.

```{r example6}
p6 <- ggplot(economics_long, aes(date, value01, colour = variable)) +
  geom_line() +
  scale_colour_manual(values = usq_palette) +
  theme_usq()
  
p6
```

# Using theme_usq() in presentations

The default settings for `theme_usq()` are fine for printed materials such as
reports, but if you wish to use it in a presentation you can use the _ggplot2_
option `base_size = ` to increase the size of the fonts, points and lines in the
graphs.

## Example 7: Using _ggplot2_'s `base_size` with `theme_usq()`

As an example, using `base_size = 24` helps ensure that the graphs are legible
on a standard sized PowerPoint slide when exported at a size of 33.87mm x 19.05mm, using `ggsave()`, for a 16x9 presentation slide that fills the whole
slide.

## Example 7: Barplots

### Using `barplot_usq()` 

Plot the areas in thousands of square miles of landmasses which exceed 10,000
sqm.

```{r example7.1}
barplot_usq(islands, col = 5)
```

### Using _ggplot2_ and `theme_usq()`

Plot the areas in thousands of square miles of landmasses which exceed 10,000
sqm.

```{r example7.2}
library(tibble)
islands_df <- as.data.frame(islands)
islands_df <- rownames_to_column(islands_df, "name")

ggplot(islands_df, aes(x = name, y = islands)) +
  geom_bar(stat = "identity", 
           colour = usq_palette[5],
           fill = usq_palette[5]) +
  theme_usq() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


```{r example8, eval = FALSE}
p7 <-  ggplot(mpg, aes(class, hwy)) +
  geom_boxplot(fill = usq_palette[1],
               colour = usq_palette[1],
               alpha = 0.5) +
  theme_usq(base_size = 24) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggsave("slide_p7.png", width = 33.87, height = 19.05, units = "cm",
       dpi = 150)
```

